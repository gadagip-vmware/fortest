define(function(require){var $=require("jquery"),_=require("underscore"),Backbone=require("backbone"),EVENT_BUS={events:{VMW_JSON_LOADED:"file:get:success:vmwareJSONFileLoaded"}};_.extend(EVENT_BUS,Backbone.Events);function validateRegParam(event,callback,context){if(_.isUndefined(event))throw new Error("Target event required");if(_.isUndefined(callback))throw new Error("Target callback required");if(_.isUndefined(context))throw new Error("Target context required");if(_.indexOf(_.values(EVENT_BUS.events),event)==-1)throw new Error("Event: "+event+" is not a recognized event")}function registerForEvent(event,callback,context){validateRegParam(event,callback,context),EVENT_BUS.on(event,function(eventData){callback(event,context,eventData)},context)}function deregisterForEvent(event,callback,context){validateRegParam(event,callback,context),EVENT_BUS.off(event,function(eventData){callback(event,context,eventData)},context)}function triggerEvent(event,eventData){if(_.indexOf(_.values(EVENT_BUS.events),event)==-1)throw new Error("Event: "+event+" is not a recognized event");EVENT_BUS.trigger(event,eventData)}return{registerForEvent:function(event,callback,listener){return registerForEvent(event,callback,listener)},deregisterForEvent:function(event,callback,listener){return deregisterForEvent(event,callback,listener)},triggerEvent:function(event,eventData){return triggerEvent(event,eventData)},getEvents:function(){return EVENT_BUS.events}}});